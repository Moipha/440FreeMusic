"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[781],{2781:function(t,e,a){a.r(e),a.d(e,{default:function(){return h}});var s=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{display:"flex","flex-direction":"column"}},[e("el-input",{staticClass:"input",attrs:{"suffix-icon":"el-icon-search",clearable:""},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search.apply(null,arguments)}},model:{value:t.searchString,callback:function(e){t.searchString=e},expression:"searchString"}}),e("el-tabs",{staticStyle:{width:"97%",margin:"auto"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{staticClass:"dis",attrs:{label:"搜索结果",disabled:""}}),e("el-tab-pane",{attrs:{label:"单曲",name:"music"}}),e("el-tab-pane",{attrs:{label:"专辑",name:"album"}}),e("el-tab-pane",{attrs:{label:"歌手",name:"author"}})],1),e("div",{on:{mouseenter:t.showScrollbar,mouseleave:t.hideScrollbar}},[e("table",[t._m(0),e("tr",{staticStyle:{height:"20px"}}),t._l(t.tableData,(function(a){return e("tr",{staticClass:"items",attrs:{id:a.id===t.currentPlayId?"light":""},on:{contextmenu:function(e){return e.preventDefault(),t.openMenu(e,a)},dblclick:function(e){return t.dbClick(a)}}},[e("td",{staticStyle:{"padding-top":"5px"}},[e("el-avatar",{attrs:{src:a.avatar,shape:"square"}})],1),e("td",[t._v(t._s(a.name))]),e("td",[t._v(t._s(a.author))]),e("td",[t._v(t._s(a.album))]),e("td",[t._v(t._s(a.time))]),e("td",[e("span",{staticClass:"el-icon-more",staticStyle:{cursor:"pointer","font-size":"20px"},on:{click:function(e){return e.stopPropagation(),t.openMenu(e,a)}}})])])}))],2)])],1)},i=[function(){var t=this,e=t._self._c;return e("tr",{staticStyle:{color:"var(--listTh)","font-size":"14px"}},[e("th",{staticStyle:{width:"5%"},attrs:{align:"center"}}),e("th",{staticStyle:{width:"40%"},attrs:{align:"left"}},[t._v("音乐标题")]),e("th",{staticStyle:{width:"20%"},attrs:{align:"left"}},[t._v("歌手")]),e("th",{staticStyle:{width:"20%"},attrs:{align:"left"}},[t._v("专辑")]),e("th",{staticStyle:{width:"5%"},attrs:{align:"left"}},[t._v("时长")]),e("th",{staticStyle:{width:"5%"},attrs:{align:"left"}})])}],r={name:"Search",data(){return{activeName:"music",searchString:"",tableData:[],loading:!1,existMenu:!1,currentPlayId:-1}},methods:{getTableData(){this.loading=!0,this.request.post("/music/searchByName/",{name:this.searchString}).then((t=>{"200"!==t.code?(this.$notify({title:"查询数据失败",message:t.msg,type:"error"}),this.loading=!1):(this.tableData=t.data,this.loading=!1)})).catch((t=>{this.$notify({title:"查询数据失败",message:t,type:"error"}),this.loading=!1}))},search(){this.getTableData(),this.$router.push({path:"/search",query:{searchStr:this.searchString}})},openMenu(t,e){t.x>1200?t.y>500?this.$bus.$emit("showMenu",t.x-230,t.y-200,!0,e,{},this.tableData,"search"):this.$bus.$emit("showMenu",t.x-230,t.y,!0,e,{},this.tableData,"search"):t.y>500?this.$bus.$emit("showMenu",t.x,t.y-230,!0,e,{},this.tableData,"search"):this.$bus.$emit("showMenu",t.x,t.y,!0,e,{},this.tableData,"search"),this.existMenu=!0},getCurrentMusic(){this.currentPlayId=JSON.parse(localStorage.getItem("currentMusic"))?JSON.parse(localStorage.getItem("currentMusic")).id:""},dbClick(t){this.$bus.$emit("play",t,this.tableData)},showScrollbar(){document.documentElement.style.setProperty("--test3","visible")},hideScrollbar(){document.documentElement.style.setProperty("--test3","hidden")}},mounted(){this.$bus.$on("changeSearchStr",(t=>{this.searchString=t,this.getTableData()})),this.searchString=this.$route.query.searchStr,this.getTableData(),this.getCurrentMusic(),this.$bus.$on("getCurrentPlayMusic",(()=>{this.getCurrentMusic()}))},beforeDestroy(){this.$bus.$off("changeSearchStr"),this.$bus.$off("getCurrentPlayMusic")}},n=r,l=a(1001),c=(0,l.Z)(n,s,i,!1,null,"caf2d83c",null),h=c.exports}}]);
//# sourceMappingURL=781.9ce60e6b.js.map