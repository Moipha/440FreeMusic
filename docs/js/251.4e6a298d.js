"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[251],{2251:function(t,s,i){i.r(s),i.d(s,{default:function(){return o}});var e=function(){var t=this,s=t._self._c;return s("div",{staticClass:"container"},[s("div",{staticClass:"background"}),s("div",{staticClass:"top"},[s("el-avatar",{staticClass:"left",attrs:{shape:"square",size:200,src:t.src}}),s("div",{staticClass:"right"},[t._m(0),s("div",{staticStyle:{"font-size":"15px","margin-left":"10px"}},[t._v("共"+t._s(t.musics.length)+"首 · 创建于"+t._s(t.user.createTime))]),s("div",{staticStyle:{"margin-top":"18px"}},[s("el-button",{staticClass:"btn",staticStyle:{width:"130px",height:"36px","border-radius":"18px 0 0 18px","font-size":"15px","line-height":"15px"},on:{click:t.playAll}},[s("i",{staticClass:"el-icon-video-play",staticStyle:{"margin-right":"5px",padding:"0"}}),t._v(" 播放全部 ")]),s("el-button",{staticClass:"btn",staticStyle:{width:"45px",height:"36px","border-radius":"0 18px 18px 0"},on:{click:t.addAll}},[s("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"15px"}})])],1)])],1),s("div",{staticClass:"bottom"},[s("table",[t._m(1),s("tr",{staticStyle:{height:"20px"}}),t._l(t.musics,(function(i){return s("tr",{staticClass:"items",attrs:{id:i.id===t.currentPlayId?"light":""},on:{contextmenu:function(s){return s.preventDefault(),t.openMenu(s,i)},dblclick:function(s){return t.dbClick(i)}}},[s("td",{staticStyle:{"padding-top":"5px"}},[s("el-avatar",{attrs:{src:i.avatar,shape:"square"}})],1),s("td",[t._v(t._s(i.name))]),s("td",[t._v(t._s(i.author))]),s("td",[t._v(t._s(i.album))]),s("td",[t._v(t._s(i.time))]),s("td",[s("span",{staticClass:"el-icon-more",staticStyle:{cursor:"pointer","font-size":"20px"},on:{click:function(s){return s.stopPropagation(),t.openMenu(s,i)}}})])])}))],2),0===t.musics.length?s("div",[t._m(2),s("div",{staticStyle:{"text-align":"center","margin-top":"20px","font-size":"20px"}},[t._v("暂 无 歌 曲")]),s("div",{staticStyle:{"font-size":"10px","text-align":"center","margin-top":"100px"}},[t._v("通过 搜索歌曲 -> 播放歌曲 -> 单击右下方红心 即可收藏歌曲")])]):t._e()])])},a=[function(){var t=this,s=t._self._c;return s("div",{staticStyle:{"font-size":"30px","font-weight":"normal","margin-top":"40px","margin-bottom":"20px"}},[t._v(" 我喜欢的音乐 "),s("span",{staticClass:"el-icon-headset"})])},function(){var t=this,s=t._self._c;return s("tr",{staticStyle:{color:"var(--listTh)","font-size":"14px"}},[s("th",{staticStyle:{width:"5%"},attrs:{align:"center"}}),s("th",{staticStyle:{width:"40%"},attrs:{align:"left"}},[t._v("音乐标题")]),s("th",{staticStyle:{width:"20%"},attrs:{align:"left"}},[t._v("歌手")]),s("th",{staticStyle:{width:"20%"},attrs:{align:"left"}},[t._v("专辑")]),s("th",{staticStyle:{width:"5%"},attrs:{align:"left"}},[t._v("时长")]),s("th",{staticStyle:{width:"5%"},attrs:{align:"left"}})])},function(){var t=this,s=t._self._c;return s("div",{staticStyle:{"text-align":"center","margin-top":"100px","font-size":"40px"}},[s("i",{staticClass:"el-icon-box"})])}],r=i(2618),n={name:"Likes",data(){return{musics:[],showDialog:!1,existMenu:!1,serverIp:r.I,currentPlayId:-1,user:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):{id:0}}},computed:{src(){return this.musics[0]?this.musics[0].avatar:i(2043)}},methods:{getStars(){this.request.post("/user/getStars",{userId:this.user.id.toString()}).then((t=>{"200"===t.code?this.musics=t.data:this.$notify({type:"error",title:"获取收藏列表失败",message:t.msg})})).catch((t=>{this.$notify({type:"error",message:t,title:"获取收藏列表失败"})}))},openMenu(t,s){t.x>1200?t.y>500?this.$bus.$emit("showMenu",t.x-230,t.y-200,!0,s,this.list,this.musics,"star"):this.$bus.$emit("showMenu",t.x-230,t.y,!0,s,this.list,this.musics,"star"):t.y>500?this.$bus.$emit("showMenu",t.x,t.y-230,!0,s,this.list,this.musics,"star"):this.$bus.$emit("showMenu",t.x,t.y,!0,s,this.list,this.musics,"star"),this.existMenu=!0},getCurrentMusic(){this.currentPlayId=JSON.parse(localStorage.getItem("currentMusic"))?JSON.parse(localStorage.getItem("currentMusic")).id:""},dbClick(t){this.$bus.$emit("play",t,this.musics)},playAll(){this.dbClick(this.musics[0])},addAll(){let t=JSON.parse(localStorage.getItem("playList"));t=t.concat(this.musics),localStorage.setItem("playList",JSON.stringify(t)),this.$bus.$emit("getPlayList"),this.$notify({type:"success",title:"添加成功",message:"已将歌单中的内容添加至播放列表"})}},mounted(){this.getStars(),this.getCurrentMusic(),this.$bus.$on("getCurrentPlayMusic",(()=>{this.getCurrentMusic()})),this.$bus.$on("changeStar",(()=>{this.getStars()}))},beforeDestroy(){this.$bus.$off("getCurrentPlayMusic"),this.$bus.$off("changeStar")}},l=n,c=i(1001),u=(0,c.Z)(l,e,a,!1,null,"50e0185c",null),o=u.exports},2043:function(t,s,i){t.exports=i.p+"img/DefaultAvatar.e88d641e.png"}}]);
//# sourceMappingURL=251.4e6a298d.js.map